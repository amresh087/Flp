<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>


<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Create Test</title>
 <link href="${pageContext.request.contextPath}/resources/css/bootstrap.css" rel="stylesheet">
     <link href="${pageContext.request.contextPath}/resources/css/sb-admin-new.css" rel="stylesheet">
     <link href="${pageContext.request.contextPath}/resources/css/custom-new.css" rel="stylesheet">
     <link href="${pageContext.request.contextPath}/resources/css/student/media.css" rel="stylesheet">
     <link href="${pageContext.request.contextPath}/resources/css/dataTable-new.css" rel="stylesheet">
    
    <!-- Custom Fonts -->
    <link href="${pageContext.request.contextPath}/resources/css/font-awesome.css" rel="stylesheet" type="text/css">

</head>
<body>

<!-- top header -->
<div class="container-fluid header-top-cont">
<div class="container">
<div class="row">
        <nav class="navbar navbar-inverse navbar-default" role="navigation">
           
            <div class="navbar-header hidden-xs">
                <p>Toll free: 1800 103 6768</p>
            </div>
            <!-- Top Menu Items -->
        
            <ul class="nav navbar-right top-nav">
                <li class="dropdown nav-br-top">
                 <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-envelope"></i> <b class="caret"></b>
                    <span class="badge badge-notify">3</span>
                    </a>
                   
                    <ul class="dropdown-menu panel-body2">
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview ">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                         <li class="message-footer">
                            <a href="#">Read All New Messages</a>
                        </li>
                    </ul>
                 
                </li>
                <li class="dropdown nav-br-top">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bell"></i> <b class="caret"></b>
                    <span class="badge badge-msg">6</span>
                    </a>
                    <!--<ul class="dropdown-menu alert-dropdown drop-custom">
                        <li>
                            <a href="#">Alert Name <span class="label label-default">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-primary">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-success">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-info">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-warning">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-danger">Alert Badge</span></a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">View All</a>
                        </li>
                    </ul>-->
                    <ul class="dropdown-menu panel-body2">
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview ">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a href="#">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                         <li class="message-footer">
                            <a href="#">Read All New Messages</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user mrr10"></i> John Smith <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#"><i class="fa fa-fw fa-user"></i> Profile</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-envelope"></i> Inbox</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-gear"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-power-off"></i> Log Out</a>
                        </li>
                    </ul>
                </li>
            </ul>
         
        </nav>
        </div>
        </div>
</div>
<!-- top header end-->

<!-- header panel -->
<div class="container-fluid nav-cont">
<div class="container">
<div class="col-md-12 col-sm-12 col-xs-12 ">
<div class="row">

<!-- Navigation  -->
<div class="row">
      <nav class="navbar navbar-default">
      
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar ">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
              <a class="navbar-brand" href="#"><img src="${pageContext.request.contextPath}/resources/images/logo.png" alt="logo" class="img-responsive"/></a>
          </div>
          <div id="navbar" class="navbar-collapse collapse pull-right">
            <ul class="nav navbar-nav">
              <li class="nav-active" ><a href="#"><span><img src="${pageContext.request.contextPath}/resources/images/dashboard.png" alt="logo"/></span>DashBoard </a></li>
              <li ><a href="#"><span><img src="${pageContext.request.contextPath}/resources/images/subjects.png" alt="logo"/></span>Subject</a></li>
              <li ><a href="#"><span><img src="${pageContext.request.contextPath}/resources/images/reports.png" alt="logo"/></span>Reports</a></li>
              
            </ul>
            
          </div>
        
      </nav>
      </div>
<!-- Navigation end -->
</div>
</div>
</div>
</div>
<!-- header panel end -->

<!-- middle panel -->
<div class="container">
<br /><br />



 <div class="tab-content">
 <h2>Self Created Assessments</h2>
		
        <!--SELECT-QUESTIONS-->
        <div id="select-ques" class="tab-pane fade in active" >
    	
        <div class="row">
        <div class="in-box">
        
        <div class="col-md-5">
         <select id="subject" onchange="getChapters(this.value)" >
         <option value=""> Select Subject </option>
         <c:forEach var="subject" items="${subjects}">
         <option value="${subject.id}">${subject.name }</option>
         
         </c:forEach>
        </select>        
        </div>
        
        <div class="col-md-4"><input type="text" placeholder="Enter Test Name"  id="testName"/></div>
        
        <div class="col-md-1"><input type="text" placeholder="Hr/Min" id="time"/></div>
        
        <div class="col-md-2"><input type="text" placeholder="Total Questions" id="total" /></div>
        
        </div>

        <div class="clearfix"></div>
        	<div id="showchapTopic">
        <div class="col-md-6">
        
        <div class="chk">
        <label><strong>Chapter</strong></label>
        
       <input type="checkbox" id="main_checkbox" /><label>Select All</label>
        
        </div>
        
        <div class="row">
        <div class="col-md-12">
        
        	<div class="panel-body2 selct-chap">
            
            <div class="table-responsive">
                
                <table class="table table-bordered table-hover table-striped">
                	
                    <tbody id="chapters"><!-- 
                    
                    	<tr>
                        <td width="20"><input class="chd_chk" type="checkbox" /></td>
                        <td><label>Addition</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="chd_chk" type="checkbox" /></td>
                        <td><label>Addition and Subtraction of Decimal Numbers</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="chd_chk" type="checkbox" /></td>
                        <td><label>Area and Perimeter</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="chd_chk" type="checkbox" /></td>
                        <td><label>Average</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="chd_chk" type="checkbox" /></td>
                        <td><label>Data Handling</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="chd_chk" type="checkbox" /></td>
                        <td><label>Factors and Multiples</label></td>
                        </tr>
                        
                                            
                     --> </tbody>
                     
                     </table>
            </div>
            
            </div>
        
        
        </div>
        </div>
        
        </div>
        
        
        <div class="col-md-6">
        
        <div class=" chk">
        <label><strong>Topic</strong></label>
         <input type="checkbox" onclick="Topicallchk()" id="main_Topic" /><label>Select All</label>
        </div>
        
        <div class="row">
        <div class="col-md-12">
        
        	<div class="panel-body2 selct-chap">
            
            <div class="table-responsive" id="creatTopic">
                
                <table class="table table-bordered table-hover table-striped">
                	
                    <tbody id="topics">
                    <!-- 
                    	<tr>
                        <td width="20"><input class="Topic_chk" type="checkbox" /></td>
                        <td><label>Addition Shortcuts</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="Topic_chk" type="checkbox" /></td>
                        <td><label>Additon Of Large Numbers</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="Topic_chk" type="checkbox" /></td>
                        <td><label>Addition - Word Problems</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="Topic_chk" type="checkbox" /></td>
                        <td><label>Four Digit Addition With Carrying</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="Topic_chk" type="checkbox" /></td>
                        <td><label>Addition - Exercise</label></td>
                        </tr>
                        
                        <tr>
                        <td width="20"><input class="Topic_chk" type="checkbox" /></td>
                        <td><label>4 and 5 Digit Addition</label></td>
                        </tr>
                         -->
                                            
                     </tbody>
                     
                     </table>
            </div>
            
            </div>
        	
            
        
        </div>
        
        
        
        </div>
        
        
        </div>
        
        </div>
        
        <div class="clearfix"></div>
        <br>
        
		</div>
        
        
 
        </div>
        <!--SELECT-QUESTIONS-->
        
        
        
        <div class="clearfix"></div>
        
        <button type="submit" onClick="createTest()" class="btn btn-danger">Create Test</button>

        
        <div class="clearfix"></div>
        
        
        <br><br>
        
        <div class="row">
        <div class="col-md-12 table-responsive" id="createtest-tab">
     
        <table id="example" class="display" cellspacing="0" width="100%">
    <thead>
        <tr class="dataTab">
            <th>Sr.</th>
            <th>Test Name</th>
            <th>Duration</th>
            <th>Total Questions</th>
            <th>Status</th>
        </tr>
    </thead>
 
   
    <tbody>
        <tr>
            <td>1</td>
	        <td>Biology Test</td>
            <td>1:30Hrs</td>
            <td>55</td>
            <td>Attampted</td>
        </tr>
      
        <tr>
            <td>2</td>
	        <td>Physics Test</td>
            <td>1:30Hrs</td>
            <td>57</td>
            <td>Attampted</td>
        </tr>
        <tr>
            <td>3</td>
	        <td>Chemistry Test</td>
            <td>1:30Hrs</td>
            <td>75</td>
            <td>Unattampted</td>
        </tr>
        <tr>
            <td>4</td>
	        <td>English Test</td>
            <td>1:30Hrs</td>
            <td>75</td>
            <td>unattampted</td>
        </tr>
        
    </tbody>
</table><br>
		
        </div>
        </div>
        
        
</div>


</div>
<!-- middle panel end -->    

  
<!-- footer panel --> 
<footer class="container-fluid">
   <div class="container">
   <div class="row">
   <div class="col-md-9 col-sm-6 col-xs-12"><img src="${pageContext.request.contextPath}/resources/images/fpro-icon.jpg"/>Copyright 2015. All Right Reserved.</div>
   <div class="col-md-3 col-sm-6 col-xs-12 right-left fot-pd"><a href="#">FAQ’s</a> <a href="#">Sitemap</a>   <a href="#">Contact</a>    <a href="#">Blog</a></div>
   </div>
   </div>
   </footer>   
<!-- footer panel end-->  


<script src="${pageContext.request.contextPath}/resources/js/jquery.js" type="text/javascript"></script>
<script src="${pageContext.request.contextPath}/resources/js/bootstrap.js" type="text/javascript"></script>

<script type="text/javascript" src="${pageContext.request.contextPath}/resources/js/jquery.flexisel.js"></script>
<script src="${pageContext.request.contextPath}/resources/js/main.js"></script>

<!-- custom scrollbar  -->
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/jquery.mCustomScrollbar.css">
<script src="${pageContext.request.contextPath}/resources/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script type="text/javascript">
var chapterList;
(function($){
			$(window).load(function(){
				$(".panel-body2").mCustomScrollbar({
					setHeight:250,
					theme:"dark-3"
				});
				});
		})(jQuery);

function getChapters(subId){
	
	console.log('Selected Subject id is: '+ subId+", and grade id is: "+ '${sessionScope.user.gradeId}');
	
	
	if(subId!=''){
		gradeId='${sessionScope.user.gradeId}';
	//	console.log('get Chapters for subject: '+ subjectId+', grade: '+ gradeId);
		
		$.get("${pageContext.request.contextPath}/ajax/schoolTeacher/getChapters?subjectId="+subId+"&gradeId="+gradeId, function(data){
			chapterList=data;
			if(data.length > 0)
			{
				$('#chapters').empty();
				for(var i=0;i<data.length;i++)
				{
					chapterList=data;
					//$('#chapters').append('<input type="checkbox" class="clsChapter" onchange="getTopics()" id="chapter_'+data[i].id+'" value="'+data[i].id+'"><label for="chapter_'+data[i].id+'" >'+data[i].name+'</label>');
					$('#chapters').append('<tr> <td width="20"><input class="chd_chk clsChapter" onchange="getTopics()" type="checkbox" id="chapter_'+data[i].id+'" value="'+data[i].id+'"/><label for="chapter_'+data[i].id+'" >'+data[i].name+'</label></td></tr>');
				}
			}
			else{
				$('#chapters').empty().append(' No Chapter Found for selected grade subject');}
		});
	}
	
}
	

function getTopics()
{
	$('#topics').empty();
	if(chapterList!=undefined && chapterList.length>0)
		{
		//$('#btnGetQuestion').show();
	$('.clsChapter:checkbox:checked').each(function(){
	console.log(this.value);
	
	for(var i=0;i<chapterList.length;i++)
	{
		console.log('found chapter ');
		var topicList=chapterList[i].topics;
		if(this.value==chapterList[i].id){
		for(var j=0;j<topicList.length;j++){
			$('#topics').append('<tr><td width="20"><input class="Topic_chk" type="checkbox" class="clsTopic" '+
					topicList[j].id+'" value="'+topicList[j].id+'"/></td> <td><label for="topic_'+topicList[j].id+'">'+topicList[j].name+'</label></td></tr>');
		}
		}
	}
});
}
	else{
		console.log('Nothing found');	
	}
}

function createTest(){
	var name=$('#testName').val();
	var subId=$('#subject').val();
	var time=$('#time').val();
	var total=$('#total').val();
	var topicIds=[];
	
	name=name.trim();
	if(subId=="")
		{
			alert("Please Select Subject");
		}
	else if(name=="")
		{
		 	alert("Please Enter Test Name");
		}
	else if(total=="")
		{
			alert("Enter total question you want to attend")
		}
	
	$("#main_checkbox").click(function () {
	    $(".checkBoxClass").prop('checked', $(this).prop('checked'));
	});

	 $(".Topic_chk:checkbox:checked").each(function(){
		 topicIds.push($(this).val());
			});
	 
	 console.log("testName: "+ name+", subId: "+ subId+", time: "+ time+", no of question: "+total+", topic Ids: "+ topicIds);
	/*  $.post("${pageContext.request.contextPath}/user/createTest",{
		 name:name,
		 subId:subId,
		 time:time,
		 total:total,
		 topicIds: topicIds.toString()
		 
	 }, function(data, status){
	        alert("Data: " + data + "\nStatus: " + status);
	    });
 */	
}

</script>

    
<script src="${pageContext.request.contextPath}/resources/js/jquery.dataTables.js"></script>

</body>
</html>